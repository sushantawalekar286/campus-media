<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Interview - Campus Media</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .interview-card {
            transition: transform 0.2s;
        }
        .interview-card:hover {
            transform: translateY(-2px);
        }
        .status-badge {
            font-size: 0.8rem;
        }
        .datetime-picker {
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            padding: 0.375rem 0.75rem;
        }
        .role-option {
            cursor: pointer;
            transition: all 0.2s;
        }
        .role-option:hover {
            background-color: #f8f9fa;
        }
        .role-option.selected {
            background-color: #e3f2fd;
            border-color: #2196f3;
        }
    </style>
</head>
<body>
    <%- include('partials/header') %>
    
    <div class="container mt-4">
        <!-- Header Section -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h1 class="display-5 fw-bold text-primary">
                    <i class="fas fa-user-tie"></i> Mock Interview System
                </h1>
                <p class="lead text-muted">Practice with real interviewers and get valuable feedback</p>
            </div>
        </div>

        <!-- Authentication Check -->
        <div id="authCheck" class="text-center mb-4" style="display: none;">
            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle"></i>
                Please <a href="/login" class="alert-link">login</a> to access mock interviews.
            </div>
        </div>

        <!-- Main Content -->
        <div id="mainContent" style="display: none;">
            <!-- Google Calendar Connection Status -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">
                                        <i class="fab fa-google"></i> Google Calendar Integration
                                    </h6>
                                    <small class="text-muted" id="calendarStatus">Checking connection...</small>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary" id="connectGoogleBtn" style="display: none;">
                                        <i class="fab fa-google"></i> Connect Google Calendar
                                    </button>
                                    <span class="badge bg-success" id="connectedBadge" style="display: none;">
                                        <i class="fas fa-check"></i> Connected
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <ul class="nav nav-tabs mb-4" id="interviewTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="request-tab" data-bs-toggle="tab" data-bs-target="#request" type="button" role="tab">
                        <i class="fas fa-plus-circle"></i> Request Interview
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="my-requests-tab" data-bs-toggle="tab" data-bs-target="#my-requests" type="button" role="tab">
                        <i class="fas fa-list"></i> My Requests
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="available-tab" data-bs-toggle="tab" data-bs-target="#available" type="button" role="tab">
                        <i class="fas fa-handshake"></i> Available Interviews
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab">
                        <i class="fas fa-history"></i> Interview History
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="interviewTabsContent">
                <!-- Request Interview Tab -->
                <div class="tab-pane fade show active" id="request" role="tabpanel">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <div class="card shadow">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-calendar-plus"></i> Request Mock Interview
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <form id="interviewRequestForm">
                                        <!-- Role Selection -->
                                        <div class="mb-4">
                                            <label class="form-label fw-bold">Role/Position *</label>
                                            <div class="row g-2">
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="SDE">
                                                        <i class="fas fa-code fa-2x text-primary mb-2"></i>
                                                        <div class="fw-bold">SDE</div>
                                                        <small class="text-muted">Software Development Engineer</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="Analyst">
                                                        <i class="fas fa-chart-line fa-2x text-success mb-2"></i>
                                                        <div class="fw-bold">Analyst</div>
                                                        <small class="text-muted">Data/Business Analyst</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="Data Scientist">
                                                        <i class="fas fa-brain fa-2x text-info mb-2"></i>
                                                        <div class="fw-bold">Data Scientist</div>
                                                        <small class="text-muted">ML/AI Specialist</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="Product Manager">
                                                        <i class="fas fa-tasks fa-2x text-warning mb-2"></i>
                                                        <div class="fw-bold">Product Manager</div>
                                                        <small class="text-muted">Product Strategy</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="DevOps Engineer">
                                                        <i class="fas fa-server fa-2x text-secondary mb-2"></i>
                                                        <div class="fw-bold">DevOps Engineer</div>
                                                        <small class="text-muted">Infrastructure & CI/CD</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="role-option p-3 border rounded text-center" data-role="Other">
                                                        <i class="fas fa-ellipsis-h fa-2x text-muted mb-2"></i>
                                                        <div class="fw-bold">Other</div>
                                                        <small class="text-muted">Custom Role</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <input type="hidden" id="selectedRole" name="role" required>
                                        </div>

                                        <!-- Interview Type -->
                                        <div class="mb-3">
                                            <label for="interviewType" class="form-label fw-bold">Interview Type *</label>
                                            <select class="form-select" id="interviewType" name="interviewType" required>
                                                <option value="">Select interview type</option>
                                                <option value="Technical">Technical Interview</option>
                                                <option value="HR">HR Interview</option>
                                                <option value="Aptitude">Aptitude Test</option>
                                                <option value="Mixed">Mixed (Technical + HR)</option>
                                            </select>
                                        </div>

                                        <!-- Date and Time -->
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="preferredDate" class="form-label fw-bold">Preferred Date *</label>
                                                <input type="date" class="form-control" id="preferredDate" name="preferredDate" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="preferredTime" class="form-label fw-bold">Preferred Time *</label>
                                                <input type="time" class="form-control" id="preferredTime" name="preferredTime" required>
                                            </div>
                                        </div>

                                        <!-- Duration -->
                                        <div class="mb-3">
                                            <label class="form-label fw-bold">Duration *</label>
                                            <div class="row g-2">
                                                <div class="col-md-4">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="duration" id="duration15" value="15">
                                                        <label class="form-check-label" for="duration15">
                                                            <i class="fas fa-clock"></i> 15 minutes
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="duration" id="duration30" value="30" checked>
                                                        <label class="form-check-label" for="duration30">
                                                            <i class="fas fa-clock"></i> 30 minutes
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="duration" id="duration45" value="45">
                                                        <label class="form-check-label" for="duration45">
                                                            <i class="fas fa-clock"></i> 45 minutes
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Additional Notes -->
                                        <div class="mb-3">
                                            <label for="notes" class="form-label fw-bold">Additional Notes</label>
                                            <textarea class="form-control" id="notes" name="notes" rows="3" placeholder="Any specific topics you'd like to focus on, or additional information..."></textarea>
                                        </div>

                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary btn-lg">
                                                <i class="fas fa-paper-plane"></i> Submit Interview Request
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- My Requests Tab -->
                <div class="tab-pane fade" id="my-requests" role="tabpanel">
                    <div class="row" id="myRequestsContainer">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3">Loading your interview requests...</p>
                        </div>
                    </div>
                </div>

                <!-- Available Interviews Tab -->
                <div class="tab-pane fade" id="available" role="tabpanel">
                    <div class="row" id="availableInterviewsContainer">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3">Loading available interviews...</p>
                        </div>
                    </div>
                </div>

                <!-- Interview History Tab -->
                <div class="tab-pane fade" id="history" role="tabpanel">
                    <div class="row" id="interviewHistoryContainer">
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3">Loading interview history...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Interview Details Modal -->
    <div class="modal fade" id="interviewDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Interview Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="interviewDetailsContent">
                    <!-- Content will be loaded dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="acceptInterviewBtn" style="display: none;">
                        <i class="fas fa-check"></i> Accept Interview
                    </button>
                    <button type="button" class="btn btn-success" id="joinInterviewBtn" style="display: none;">
                        <i class="fas fa-video"></i> Join Interview
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/mock-interview.js"></script>
</body>
</html>
